use `facture_sage`;
INSERT INTO `roles` (`id`, `nom`, `createdAt`, `updatedAt`) VALUES ('1', 'admin', now(), now());

INSERT INTO `users` (
  `id`,
  `email`,
  `motDePasse`,
  `active`,
  `nom`,
  `prenom`,
  `categorie`,
  `idRole`,
  `createdAt`,
  `updatedAt`
) VALUES (
  1,
  'dev01@sodim.corp',
  '$2a$08$1ut7a.F9q4DeWgfroGpbD.ep/ficBelAofVoRJIIEwRdaKl1OW0bm',
  1,
  'Rakoto',
  'Dev',
  'MQ1',
  1,
  '2025-02-14 09:54:16',
  '2025-05-07 12:27:28'
);

CREATE OR REPLACE VIEW v_menu_roles as
select m.*, mr.roleId
from menus m join menu_roles mr
on(m.id = mr.menuId);


CREATE TABLE `cloture` (
  `idcloture` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `datecloture` DATE DEFAULT NULL,
  `typedoc` VARCHAR(45) DEFAULT NULL,
  `nomfichier` VARCHAR(45) DEFAULT NULL,
  `cloturepar` VARCHAR(45) DEFAULT NULL,
  `nomfichierreg` VARCHAR(45) DEFAULT NULL,
  `createdAt` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


CREATE TABLE `datafacture` (
  `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `n1` INT DEFAULT 1,
  `n2` INT DEFAULT 7,
  `n3` INT DEFAULT 1,
  `n4` INT,
  `n5` VARCHAR(13),
  `n6` VARCHAR(8),
  `n7` VARCHAR(17),
  `n8` VARCHAR(8),
  `n9` VARCHAR(17),
  `n10` VARCHAR(35),
  `n11` VARCHAR(35),
  `n12` INT DEFAULT 1,
  `n13` INT DEFAULT 0,
  `n14` VARCHAR(45) DEFAULT '0,000000',
  `n15` VARCHAR(17),
  `n16` INT DEFAULT 1,
  `n17` INT DEFAULT 1,
  `n18` INT DEFAULT 0,
  `n19` CHAR(1),
  `n20` CHAR(1),
  `n21` CHAR(1),
  `n22` CHAR(1),
  `n23` CHAR(1),
  `n24` CHAR(1),
  `n25` CHAR(1),
  `n26` INT DEFAULT 1,
  `n27` INT DEFAULT 21,
  `n28` INT DEFAULT 11,
  `n29` INT DEFAULT 1,
  `n30` INT DEFAULT 1,
  `n31` INT DEFAULT 1,
  `n32` INT DEFAULT 0,
  `n33` VARCHAR(6) DEFAULT '0,0000',
  `n34` VARCHAR(7) DEFAULT '0,0100',
  `n35` INT DEFAULT 1,
  `n36` INT DEFAULT 0,
  `n37` INT DEFAULT 2,
  `n38` VARCHAR(8) DEFAULT '4111000',
  `n39` VARCHAR(8),
  `n40` VARCHAR(35),
  `n41` VARCHAR(35),
  `n42` VARCHAR(35),
  `n43` INT DEFAULT 1,
  `n44` VARCHAR(17),
  `n45` CHAR(1),
  `n46` INT DEFAULT 0,
  `n47` VARCHAR(4) DEFAULT '0,00',
  `n48` INT DEFAULT 0,
  `n49` INT DEFAULT 0,
  `n50` VARCHAR(4) DEFAULT '0,00',
  `n51` INT DEFAULT 0,
  `n52` VARCHAR(6) DEFAULT '0,0000',
  `n53` INT DEFAULT 0,
  `n54` INT DEFAULT 0,
  `n55` VARCHAR(6) DEFAULT '0,0000',
  `n56` INT DEFAULT 0,
  `n57` INT DEFAULT 0,
  `n58` VARCHAR(6) DEFAULT '0,0000',
  `n59` INT DEFAULT 0,
  `n60` INT DEFAULT 0,
  `n61` VARCHAR(35),
  `n62` CHAR(1),
  `n63` CHAR(1),
  `n64` INT DEFAULT 0,
  `n65` INT DEFAULT 0,
  `idcloture` INT,
  `nomagasin` VARCHAR(45),
  `numeromagasin` VARCHAR(45),
  `minicentrale` VARCHAR(45),
  `client` VARCHAR(45),
  `montant` DOUBLE,
  `nbticket` INT,
  `nbarticlevendu` INT,
  `quatitevendu` DOUBLE,
  `tva` DOUBLE,
  `createdAt` DATETIME DEFAULT CURRENT_TIMESTAMP,
  `updatedAt` DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  FOREIGN KEY (`idcloture`) REFERENCES `cloture`(`idcloture`) 
    ON UPDATE CASCADE 
    ON DELETE SET NULL
);


CREATE TABLE `datafactureligne` (
  `iddatafactureligne` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  `n1` CHAR(1) DEFAULT NULL,
  `n2` VARCHAR(18) DEFAULT NULL,
  `n3` VARCHAR(69) DEFAULT NULL,
  `n4` CHAR(2) DEFAULT NULL,
  `n5` VARCHAR(21) DEFAULT NULL,
  `n6` CHAR(1) DEFAULT NULL,
  `n7` VARCHAR(30) DEFAULT NULL,
  `n8` CHAR(1) DEFAULT NULL,
  `n9` CHAR(1) DEFAULT NULL,
  `n10` CHAR(1) DEFAULT NULL,
  `n11` INT DEFAULT 0,
  `n12` VARCHAR(45) DEFAULT NULL,
  `n13` VARCHAR(10) DEFAULT '0,00',
  `n14` VARCHAR(45) DEFAULT NULL,
  `n15` VARCHAR(45) DEFAULT NULL,
  `n16` CHAR(1) DEFAULT NULL,
  `n17` VARCHAR(6) DEFAULT '0,0000',
  `n18` VARCHAR(6) DEFAULT '0,0000',
  `n19` VARCHAR(45) DEFAULT NULL,
  `n20` INT DEFAULT 0,
  `n21` VARCHAR(45) DEFAULT NULL,
  `n22` VARCHAR(45) DEFAULT '0',
  `n23` VARCHAR(45) DEFAULT NULL,
  `n24` INT DEFAULT 0,
  `n25` CHAR(1) DEFAULT NULL,
  `n26` CHAR(1) DEFAULT NULL,
  `n27` CHAR(1) DEFAULT NULL,
  `n28` VARCHAR(35) DEFAULT NULL,
  `n29` CHAR(1) DEFAULT NULL,
  `n30` INT DEFAULT 1,
  `n31` CHAR(1) DEFAULT NULL,
  `n32` INT DEFAULT 0,
  `n33` VARCHAR(7) DEFAULT '20,0000',
  `n34` INT DEFAULT 0,
  `n35` INT DEFAULT 0,
  `n36` VARCHAR(6) DEFAULT '0,0000',
  `n37` INT DEFAULT 0,
  `n38` INT DEFAULT 0,
  `n39` VARCHAR(6) DEFAULT '0,0000',
  `n40` INT DEFAULT 0,
  `n41` INT DEFAULT 0,
  `n42` VARCHAR(17) DEFAULT NULL,
  `n43` CHAR(1) DEFAULT NULL,
  `n44` CHAR(1) DEFAULT NULL,
  `n45` INT DEFAULT 0,
  `n46` INT DEFAULT 0,
  `n47` CHAR(1) DEFAULT NULL,
  `n48` CHAR(1) DEFAULT NULL,
  `n49` INT DEFAULT 0,
  `n50` INT DEFAULT 0,
  `iddatafacture` INT DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
